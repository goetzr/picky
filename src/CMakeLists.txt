add_library(picky
            ${picky_SOURCE_DIR}/include/picky/picky_endian.h
            BinaryFileReader.cpp ${picky_SOURCE_DIR}/include/picky/BinaryFileReader.h
            ReadError.cpp ${picky_SOURCE_DIR}/include/picky/ReadError.h
            SeekError.cpp ${picky_SOURCE_DIR}/include/picky/SeekError.h)
add_library(picky::picky ALIAS picky)

target_include_directories(picky
	INTERFACE ${picky_SOURCE_DIR}/include
	PRIVATE ${picky_SOURCE_DIR}/include/picky
)
target_link_libraries(picky PRIVATE fmt::fmt)

include(GenerateExportHeader)
generate_export_header(picky)
# Necessary so that the "_export.h" export header generated by generate_export_header can be found.
target_include_directories(picky PUBLIC
  ${CMAKE_CURRENT_BINARY_DIR}
)
if (NOT BUILD_SHARED_LIBS)
  # When building as a static library a special preprocessor definition is necessary to prevent
  # the symbol export/import keywords from being added.
  target_compile_definitions(picky PRIVATE
    PICKY_STATIC_DEFINE
  )
endif()